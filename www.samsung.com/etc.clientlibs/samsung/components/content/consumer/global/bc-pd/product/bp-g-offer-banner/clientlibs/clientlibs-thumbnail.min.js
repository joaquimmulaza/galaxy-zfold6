(function(){var g=window.sg.common.$q,e=window.sg.common.lazyLoad,h=window.sg.common.utils,c=function(b){var a=this;this.selector={section:".hubble-offer-banner-v2-wrap",component:".hubble-offer-banner-v2",open:"is-collapse",btn:".hubble-offer-banner-v2__cta button",content:".hubble-offer-banner-v2",bannerImage:".hubble-offer-banner-v2__detail-img",unFoldTimeTextArea:".hubble-offer-banner-v2__detail .hubble-offer-banner-v2__simple-txt-area",unFoldTimer:".hubble-offer-banner-v2__detail .s-promo-timearea .s-timer",
close:".s-offer-close span.blind"};this.ele={window:g(window),section:g(b),component:g(b),btn:null,content:null,bannerImage:null,unFoldTimeTextArea:null,unFoldTimer:null,close:null};this.gap=null;this.handler={toggle:function(){a.ele.component.hasClass(a.selector.open)?a.openBanner():a.closeBanner()},resize:function(){a.resize()},scroll:function(){0>a.ele.btn.offset().bottom?a.ele.btn.removeClass("cta-bounce-on"):a.ele.btn.addClass("cta-bounce-on")},timer:{setCount:function(){clearInterval(a.counterTimer);
if(null===a.gap||void 0===a.gap||0>a.gap)a.gap=0;a.handler.timer.count();a.counterTimer=setInterval(a.handler.timer.count,1E3)},count:function(){var d="";var b=a.counter.numbers(a.fold.start,a.fold.end,a.gap);a.gap++;var f=a.ele.component.find(".hubble-offer-banner-v2__detail .s-promo-timearea .s-timer");(a.fold.end-a.fold.start)/1E3<a.gap&&(a.fold.use=!1,clearInterval(a.counterTimer));"00"===b.day?(f.find(".days").remove(),f.addClass("not-days")):(f.find(".days .text").innerHTML(b.day),d=b.day+" "+
a.globalText.Days+" ");f.find(".hours .text").innerHTML(b.hour);f.find(".mins .text").innerHTML(b.minute);f.find(".seconds .text").innerHTML(b.second);d=""+d+b.hour+" "+a.globalText.Hours+" "+b.minute+" "+a.globalText.Mins+" "+b.second+" "+a.globalText.Secs;b=a.ele.component.find(".hubble-offer-banner-v2__detail .hubble-offer-banner-v2__simple-txt-area .timer-txt");0<b.target.length&&b.innerHTML(d)}}};this.counter={makeDate:function(b){var a=b.replace(/\+[0-9]{4}$/,""),d=new Date(a);a=b.substring(a.length);
""!==a&&(b=parseInt(a.substring(0,3),0),a=parseInt(a.substring(3),0),0>b&&(a*=-1),d.setHours(d.getHours()+-1*b),d.setMinutes(d.getMinutes()+-1*a));return d},numbers:function(b,a,c){b=a-b-1E3*c;return 0>=b?{day:this.numFormat(0),hour:this.numFormat(0),minute:this.numFormat(0),second:this.numFormat(0)}:{day:this.numFormat(Math.floor(b/864E5)),hour:this.numFormat(Math.floor(b%864E5/36E5)),minute:this.numFormat(Math.floor(b%36E5/6E4)),second:this.numFormat(Math.floor(b%6E4/1E3))}},numFormat:function(b){return 10>
b&&0<=b?"0"+b:b}};this.fold={start:null,end:null,use:!0};this.text={};this.timer=null;this.DELAY_TIME=400;this.counterTimer=0;this.timeStart=this.timeEnd=null;c.instances.set(b,this);this.init()};c.prototype.setProperty=function(){this.ele.component=this.ele.section.find(this.selector.component);this.ele.btn=this.ele.component.find(this.selector.btn);this.ele.bannerImage=this.ele.component.find(this.selector.bannerImage);this.ele.unFoldTimeTextArea=this.ele.component.find(this.selector.unFoldTimeTextArea);
this.ele.unFoldTimer=this.ele.component.find(this.selector.unFoldTimer);this.ele.close=this.ele.component.find(this.selector.close);this.globalText=JSON.parse(this.ele.component.target[0].dataset.globalText);this.foldingPc=this.ele.component.target[0].dataset.foldingPc;this.foldingMobile=this.ele.component.target[0].dataset.foldingMobile;if(this.ele.unFoldTimeTextArea.hasClass("active")){var b=this.ele.unFoldTimeTextArea.attr("data-start-time"),a=this.ele.unFoldTimeTextArea.attr("data-end-time");
this.ele.component.addClass("is-timer");b&&(this.fold.start=this.counter.makeDate(b));a&&(this.fold.end=this.counter.makeDate(a));b&&a?this.ele.unFoldTimer.innerHTML('\x3cspan class\x3d"days"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+this.globalText.Days+'\x3c/span\x3e\n            \x3c/span\x3e\n            \x3cspan class\x3d"hours"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+
this.globalText.Hours+'\x3c/span\x3e\n            \x3c/span\x3e\n            \x3cspan class\x3d"mins"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+this.globalText.Mins+'\x3c/span\x3e\n            \x3c/span\x3e\n            \x3cspan class\x3d"seconds"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+this.globalText.Secs+"\x3c/span\x3e\n            \x3c/span\x3e"):(this.fold.start=
-1,this.fold.end=-1)}else this.fold.use=!1};c.prototype.init=function(){this.setProperty();this.bindEvents();this.bannerInit();this.bannerImageView()};c.prototype.reInit=function(){clearInterval(this.counterTimer);clearInterval(this.timer);this.unBindEvents();this.setProperty();this.bindEvents();this.bannerInit();this.bannerImageView()};c.prototype.bindEvents=function(){this.ele.btn.on("click",this.handler.toggle);this.ele.window.on("resize",this.handler.resize);this.ele.window.on("scroll",this.handler.scroll)};
c.prototype.unBindEvents=function(){this.ele.btn.off("click",this.handler.toggle);this.ele.window.off("resize",this.handler.resize);this.ele.window.off("scroll",this.handler.scroll)};c.prototype.openBanner=function(){var b=this;this.ele.component.addClass("is-move");this.ele.component.addClass("is-active");this.ele.component.removeClass("is-collapse");this.ele.component.removeClass("is-init");this.ele.close.innerHTML(this.globalText.Collapse);this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){b.ele.component.removeClass(b.selector.open);
b.ele.component.removeClass("is-move");b.ele.component.addClass("is-active");e.setLazyLoad()},this.DELAY_TIME-100)};c.prototype.closeBanner=function(){var b=this;this.ele.component.addClass("is-move");this.ele.component.removeClass("is-active");this.ele.component.addClass("is-collapse");this.ele.btn.removeClass("cta-bounce-on");this.ele.close.innerHTML(this.globalText.Expand);this.timer=setTimeout(function(){b.ele.component.addClass(b.selector.open);b.ele.component.removeClass("is-move")},this.DELAY_TIME)};
c.prototype.resize=function(){this.bannerImageView()};c.prototype.bannerImageView=function(){var b=this.ele.bannerImage.find(".hubble-offer-banner-v2__detail-img img").attr("data-desktop-src"),a=this.ele.bannerImage.find(".hubble-offer-banner-v2__detail-img img").attr("data-mobile-src");"desktop"===h.getCurrentDevice()&&b||"mobile"===h.getCurrentDevice()&&a?(this.ele.bannerImage.show(),this.ele.bannerImage.find(".img").show()):this.ele.bannerImage.hide()};c.prototype.bannerInit=function(){var b=this;
this.ele.component.hasClass("is-loaded")||(this.ele.component.addClass("is-loaded"),this.ele.component.addClass("is-init"),setTimeout(function(){b.ele.component.removeClass("is-init")},1E3));this.fold.use&&this.handler.timer.setCount();"desktop"===h.getCurrentDevice()&&"Y"===this.foldingPc||"mobile"===h.getCurrentDevice()&&"Y"===this.foldingMobile?this.closeBanner():this.openBanner()};c.prototype.getLang=function(){return document.documentElement.lang};c.instances=new WeakMap;window.sg.components.hubbleOfferBannerV2=
{init:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(b){c.instances.has(b)||new c(b)})},reInit:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(b){c.instances.has(b)?c.instances.get(b).reInit():new c(b)})},openBanner:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(b){c.instances.has(b)?c.instances.get(b).openBanner():new c(b)})},closeBanner:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(b){c.instances.has(b)?c.instances.get(b).closeBanner():
new c(b)})}}})();
(function(g,e,h){function c(b){var a="",c={};"P"===b?a="DEFAULT":"L"===b?a="LEASE":"E"===b&&(a="EUP");e.each(k,function(b,l){if(l&&l.bannerType===a)return d.show(),c=k[b],!1;d.hide()});return c}function b(b){if("Y"==BC_GROUP.bannerUseYn)return d.remove(),!1;var a="";"P"===b?a=c("P"):"L"===b?a=c("L"):"E"===b&&(a=c("E"));var f=a;if(f&&0<Object.keys(f).length){var g=e("#hubble-offer-banner-v2"),h=g.attr("data-global-text"),k=/<[^>]*>?/g;f=void 0!=f.unfoldTitle?f.unfoldTitle.replace(k,""):" ";h=JSON.parse(h);
h.Expand=Granite.I18n.get("{0} Expand",f,i18n_hint);h.Collapse=Granite.I18n.get("{0} Collapse",f,i18n_hint);g.attr("data-global-text",JSON.stringify(h));g.find(".hubble-offer-banner-v2__detail-cta a").attr("an-la","top banner:"+f+":learn more")}if(!a.bannerType)return!1;"undefined"!=typeof a.unfoldBGColor&&d.find(".hubble-offer-banner-v2__detail").css("background-color",a.foldBGColor);"undefined"!=typeof a.unfoldDescription&&d.find(".hubble-offer-banner-v2__detail-desc p").html(unescapeHtml(a.unfoldDescription));
"undefined"==typeof a.unfoldTextColor&&(a.unfoldTextColor="");"Y"===a.ctaUseYn?(g=a.ctaUrl?a.ctaUrl:"javascript:;","undefined"==typeof a.ctaText&&(a.ctaText=""),d.find(".hubble-offer-banner-v2__detail-cta").show(),d.find(".hubble-offer-banner-v2__detail-cta a").attr("href",g),d.find(".hubble-offer-banner-v2__detail-cta a").html(a.ctaText),d.find(".hubble-offer-banner-v2__detail-cta a").append('\x3csvg class\x3d"icon" focusable\x3d"false" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#outlink-bold" href\x3d"#outlink-bold"\x3e\x3c/use\x3e'),
d.find(".hubble-offer-banner-v2__detail-cta a").attr("target","_blank")):d.find(".hubble-offer-banner-v2__detail-cta").hide();if(isClickFirst||"P"!=b)"null"!=a.imagePath&&""!=a.imagePath&&null!=a.imagePath?"null"!=a.imageTitle&&""!=a.imageTitle&&null!=a.imageTitle?d.find(".hubble-offer-banner-v2__detail-img img").attr("alt",a.imageTitle):d.find(".hubble-offer-banner-v2__detail-img img").removeAttr("alt"):d.find(".hubble-offer-banner-v2__detail-img").remove(),"null"!=a.mobileImagePath&&""!=a.mobileImagePath&&
null!=a.mobileImagePath?"null"!=a.mobileImageTitle&&"undefined"!=typeof a.mobileImageTitle&&""!=a.mobileImageTitle&&null!=a.mobileImageTitle?d.find(".hubble-offer-banner-v2__detail-mobile-img img").attr("alt",""):d.find(".hubble-offer-banner-v2__detail-mobile-img img").removeAttr("alt"):d.find(".hubble-offer-banner-v2__detail-mobile-img").remove();"undefined"==typeof a.foldTextColor&&(a.foldTextColor="");"undefined"!=typeof a.foldBGColor&&d.find(".hubble-offer-banner-v2").css("background-color",a.unfoldBGColor);
!isClickFirst||"N"!=a.bannerFoldingStatus&&"N"!=a.mobileBannerFoldingStatus||e(".hubble-offer-banner-v2").hasClass("is-collapse")||window.sg.components.hubbleOfferBannerV2.closeBanner();e(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-tr","kv-"+bcPageTrack()+"-view more-indication");e(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-ca","indication");e(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-ac","view more");e(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-la",
"view more")}function a(){e(document).on("click",".hubble-offer-banner-v2__cta .s-offer-close",function(a){a.preventDefault();e(this).attr("an-ac","view more");e(this).attr("an-la","view more");a="Y"===BC_MODEL.leaseYn?c("L"):"E"===BC_MODEL.leaseYn?c("E"):c("P");"N"==(e("#hubble-offer-banner-v2").hasClass("is-collapse")?"Y":"N")?"undefined"!=typeof a.unfoldTitle&&d.find(".hubble-offer-banner-v2__detail-title h2").html(unescapeHtml(a.unfoldTitle)):"undefined"!=typeof a.foldTitle&&d.find(".hubble-offer-banner-v2__detail-title h2").html(unescapeHtml(a.foldTitle))})}
var d=e(".hubble-offer-banner-v2"),k=BC_GROUP.banners;e(document).on("productChangeEvent",function(){if(0<d.length){var a=BC_MODEL.leaseYn,c=e("#storeType").val();"GPv2"==c||"NewHybris"==c?b("P"):"Y"===a?b("L"):"E"===a?b("E"):b("P")}});e(function(){0<d.length&&(k&&0<k.length&&b("P"),a())})})(window,window.jQuery,window.document);